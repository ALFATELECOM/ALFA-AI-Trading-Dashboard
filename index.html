<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlgoTrade Pro - Complete Algorithmic Trading Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --accent-color: #06d6a0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-bg: #0f172a;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            --success-gradient: linear-gradient(135deg, var(--success-color), var(--accent-color));
            --danger-gradient: linear-gradient(135deg, var(--danger-color), #dc2626);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--light-bg);
            overflow-x: hidden;
        }

        body.dark-mode {
            --light-bg: #0f172a;
            --card-bg: #1e293b;
            --text-dark: #f1f5f9;
            --text-light: #94a3b8;
            --border-color: #334155;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            grid-template-rows: 70px 1fr;
            height: 100vh;
            grid-template-areas: 
                "sidebar header"
                "sidebar content";
        }

        /* Header */
        .header {
            grid-area: header;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 8px 15px 8px 40px;
            border: 2px solid var(--border-color);
            border-radius: 20px;
            width: 300px;
            font-size: 14px;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        /* Sidebar */
        .sidebar {
            grid-area: sidebar;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            overflow-y: auto;
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .logo h2 {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: var(--text-dark);
            text-decoration: none;
            transition: all 0.3s ease;
            border-right: 3px solid transparent;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(99, 102, 241, 0.1);
            border-right-color: var(--primary-color);
            color: var(--primary-color);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        /* Content Area */
        .content {
            grid-area: content;
            padding: 30px;
            overflow-y: auto;
            background: var(--light-bg);
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        /* Strategy Builder */
        .strategy-builder {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            gap: 20px;
            height: 600px;
        }

        .components-panel {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
        }

        .canvas-area {
            background: var(--card-bg);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--border-color);
        }

        .properties-panel {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
        }

        .component-item {
            padding: 10px;
            margin: 5px 0;
            background: var(--light-bg);
            border-radius: 6px;
            cursor: move;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .component-item:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary-color);
        }

        /* Charts */
        .chart-container {
            height: 400px;
            background: var(--card-bg);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            border: 1px solid var(--border-color);
        }

        /* Tables */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .table th {
            background: var(--light-bg);
            font-weight: 600;
            color: var(--text-dark);
        }

        .table tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        /* Status Indicators */
        .status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status.running {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success-color);
        }

        .status.stopped {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger-color);
        }

        .status.paused {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--card-bg);
            margin: 5% auto;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            border-radius: 15px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: var(--text-light);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover {
            color: var(--text-dark);
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background: var(--light-bg);
            padding: 5px;
            border-radius: 10px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: var(--text-dark);
        }

        .tab-btn.active {
            background: var(--card-bg);
            color: var(--primary-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Metrics Cards */
        .metric-card {
            text-align: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .metric-change {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .positive {
            color: var(--success-color);
        }

        .negative {
            color: var(--danger-color);
        }

        /* Code Editor */
        .code-editor {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            min-height: 300px;
            border: 1px solid var(--border-color);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-in {
            animation: slideIn 0.3s ease;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 250px 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "header"
                    "content";
            }
            
            .sidebar {
                display: none;
            }
            
            .grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .strategy-builder {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
                height: auto;
            }
        }

        /* Page-specific styles */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Dark mode toggle */
        .theme-toggle {
            background: none;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Notification system */
        .notifications {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
        }

        .notification {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            max-width: 350px;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            border-left: 4px solid var(--success-color);
        }

        .notification.error {
            border-left: 4px solid var(--danger-color);
        }

        .notification.warning {
            border-left: 4px solid var(--warning-color);
        }
    </style>
</head>
<body>
    <div class="main-layout">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search strategies, symbols, or commands...">
                </div>
            </div>
            <div class="header-right">
                <span id="system-status" class="status running">SYSTEM ONLINE</span>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-profile">
                    <i class="fas fa-user-circle" style="font-size: 1.5rem; color: var(--primary-color);"></i>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2><i class="fas fa-chart-line"></i> AlgoTrade Pro</h2>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" onclick="showPage('dashboard')">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#strategy-builder" class="nav-link" onclick="showPage('strategy-builder')">
                            <i class="fas fa-code-branch"></i>
                            <span>Strategy Builder</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#backtesting" class="nav-link" onclick="showPage('backtesting')">
                            <i class="fas fa-history"></i>
                            <span>Backtesting</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#live-trading" class="nav-link" onclick="showPage('live-trading')">
                            <i class="fas fa-bolt"></i>
                            <span>Live Trading</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#portfolio" class="nav-link" onclick="showPage('portfolio')">
                            <i class="fas fa-briefcase"></i>
                            <span>Portfolio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#risk-management" class="nav-link" onclick="showPage('risk-management')">
                            <i class="fas fa-shield-alt"></i>
                            <span>Risk Management</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#market-data" class="nav-link" onclick="showPage('market-data')">
                            <i class="fas fa-chart-bar"></i>
                            <span>Market Data</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#research" class="nav-link" onclick="showPage('research')">
                            <i class="fas fa-flask"></i>
                            <span>Research Lab</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#optimization" class="nav-link" onclick="showPage('optimization')">
                            <i class="fas fa-cogs"></i>
                            <span>Optimization</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#alerts" class="nav-link" onclick="showPage('alerts')">
                            <i class="fas fa-bell"></i>
                            <span>Alerts & Signals</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#analytics" class="nav-link" onclick="showPage('analytics')">
                            <i class="fas fa-analytics"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" onclick="showPage('settings')">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <h1 class="page-title">Trading Dashboard</h1>
                    <div>
                        <button class="btn btn-primary" onclick="showModal('quick-strategy-modal')">
                            <i class="fas fa-plus"></i> Quick Strategy
                        </button>
                        <button class="btn btn-success" onclick="startAllStrategies()">
                            <i class="fas fa-play"></i> Start All
                        </button>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="grid-4" style="margin-bottom: 30px;">
                    <div class="metric-card">
                        <div class="metric-value positive" id="total-pnl">+₹45,680</div>
                        <div class="metric-label">Total P&L</div>
                        <div class="metric-change positive">+12.4% today</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="color: var(--primary-color);" id="active-strategies">8</div>
                        <div class="metric-label">Active Strategies</div>
                        <div class="metric-change">2 optimizing</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="color: var(--warning-color);" id="risk-exposure">68%</div>
                        <div class="metric-label">Risk Exposure</div>
                        <div class="metric-change">Within limits</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value positive" id="win-rate">84.2%</div>
                        <div class="metric-label">Win Rate</div>
                        <div class="metric-change positive">+2.1% this week</div>
                    </div>
                </div>

                <div class="grid-2">
                    <!-- Active Strategies -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Active Strategies</h3>
                            <button class="btn btn-sm btn-secondary" onclick="refreshStrategies()">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                        <div id="strategies-list">
                            <!-- Strategies will be populated here -->
                        </div>
                    </div>

                    <!-- Performance Chart -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Portfolio Performance</h3>
                            <div class="tabs" style="width: auto; margin: 0;">
                                <button class="tab-btn active" onclick="updateChart('1D')">1D</button>
                                <button class="tab-btn" onclick="updateChart('1W')">1W</button>
                                <button class="tab-btn" onclick="updateChart('1M')">1M</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div>Interactive Performance Chart</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Trades -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Trades</h3>
                        <button class="btn btn-sm btn-primary" onclick="showModal('trade-details-modal')">
                            <i class="fas fa-list"></i> View All
                        </button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Strategy</th>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>P&L</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="recent-trades">
                            <!-- Trades will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Strategy Builder Page -->
            <div id="strategy-builder" class="page">
                <div class="page-header">
                    <h1 class="page-title">Strategy Builder</h1>
                    <div>
                        <button class="btn btn-secondary" onclick="loadTemplate()">
                            <i class="fas fa-file-import"></i> Load Template
                        </button>
                        <button class="btn btn-primary" onclick="saveStrategy()">
                            <i class="fas fa-save"></i> Save Strategy
                        </button>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="showBuilderTab('visual')">Visual Builder</button>
                    <button class="tab-btn" onclick="showBuilderTab('code')">Code Editor</button>
                    <button class="tab-btn" onclick="showBuilderTab('templates')">Templates</button>
                </div>

                <!-- Visual Builder -->
                <div id="visual-builder" class="tab-content active">
                    <div class="strategy-builder">
                        <div class="components-panel">
                            <h4>Components</h4>
                            
                            <div style="margin-bottom: 20px;">
                                <h5>Indicators</h5>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-chart-line"></i> Moving Average
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-wave-square"></i> RSI
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-chart-area"></i> MACD
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-signal"></i> Bollinger Bands
                                </div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <h5>Conditions</h5>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-greater-than"></i> Price Above
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-less-than"></i> Price Below
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-arrows-alt-h"></i> Crossover
                                </div>
                            </div>

                            <div>
                                <h5>Actions</h5>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-arrow-up"></i> Buy Order
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-arrow-down"></i> Sell Order
                                </div>
                                <div class="component-item" draggable="true">
                                    <i class="fas fa-shield-alt"></i> Stop Loss
                                </div>
                            </div>
                        </div>

                        <div class="canvas-area">
                            <div style="text-align: center; margin-top: 200px; color: var(--text-light);">
                                <i class="fas fa-mouse-pointer" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <div>Drag and drop components here to build your strategy</div>
                            </div>
                        </div>

                        <div class="properties-panel">
                            <h4>Properties</h4>
                            <div id="component-properties">
                                <p style="color: var(--text-light); text-align: center; margin-top: 50px;">
                                    Select a component to edit its properties
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Code Editor -->
                <div id="code-editor" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Python Strategy Code</h3>
                            <div>
                                <button class="btn btn-sm btn-secondary">
                                    <i class="fas fa-play"></i> Test
                                </button>
                                <button class="btn btn-sm btn-primary">
                                    <i class="fas fa-check"></i> Compile
                                </button>
                            </div>
                        </div>
                        <div class="code-editor">
<pre># AlgoTrade Pro Strategy Template
import pandas as pd
import numpy as np
from algotrade import Strategy, Indicator

class MyStrategy(Strategy):
    def __init__(self):
        self.sma_fast = Indicator.SMA(period=10)
        self.sma_slow = Indicator.SMA(period=30)
        self.rsi = Indicator.RSI(period=14)
    
    def on_data(self, data):
        # Entry Conditions
        if (self.sma_fast.value > self.sma_slow.value and 
            self.rsi.value < 70 and 
            not self.position.is_long):
            
            self.buy(size=100, stop_loss=0.02, take_profit=0.05)
        
        # Exit Conditions
        elif (self.sma_fast.value < self.sma_slow.value and 
              self.position.is_long):
            
            self.sell_all()
    
    def on_order_filled(self, order):
        self.log(f"Order filled: {order}")
</pre>
                        </div>
                    </div>
                </div>

                <!-- Templates -->
                <div id="templates" class="tab-content">
                    <div class="grid-3">
                        <div class="card">
                            <h4>Momentum Strategy</h4>
                            <p>Trend-following strategy using moving averages and momentum indicators.</p>
                            <div style="margin: 15px 0;">
                                <span class="status running">Tested</span>
                                <span style="margin-left: 10px; color: var(--success-color);">Win Rate: 72%</span>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="loadStrategyTemplate('momentum')">Load Template</button>
                        </div>
                        
                        <div class="card">
                            <h4>Mean Reversion</h4>
                            <p>Counter-trend strategy using Bollinger Bands and RSI oversold/overbought levels.</p>
                            <div style="margin: 15px 0;">
                                <span class="status running">Tested</span>
                                <span style="margin-left: 10px; color: var(--success-color);">Win Rate: 68%</span>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="loadStrategyTemplate('mean-reversion')">Load Template</button>
                        </div>
                        
                        <div class="card">
                            <h4>Arbitrage</h4>
                            <p>Statistical arbitrage strategy exploiting price differences across markets.</p>
                            <div style="margin: 15px 0;">
                                <span class="status running">Tested</span>
                                <span style="margin-left: 10px; color: var(--success-color);">Win Rate: 89%</span>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="loadStrategyTemplate('arbitrage')">Load Template</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backtesting Page -->
            <div id="backtesting" class="page">
                <div class="page-header">
                    <h1 class="page-title">Strategy Backtesting</h1>
                    <button class="btn btn-primary" onclick="runBacktest()">
                        <i class="fas fa-play"></i> Run Backtest
                    </button>
                </div>

                <div class="grid-2">
                    <!-- Backtest Configuration -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Backtest Configuration</h3>
                        </div>
                        <div class="form-group">
                            <label>Strategy</label>
                            <select>
                                <option>Momentum Strategy v2.1</option>
                                <option>Mean Reversion Pro</option>
                                <option>Arbitrage Master</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date Range</label>
                            <div class="grid-2">
                                <input type="date" value="2023-01-01">
                                <input type="date" value="2024-01-01">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Initial Capital</label>
                            <input type="number" value="100000" placeholder="₹100,000">
                        </div>
                        <div class="form-group">
                            <label>Commission</label>
                            <input type="number" value="0.01" step="0.01" placeholder="0.01%">
                        </div>
                        <div class="form-group">
                            <label>Slippage</label>
                            <input type="number" value="0.05" step="0.01" placeholder="0.05%">
                        </div>
                    </div>

                    <!-- Backtest Results -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Backtest Results</h3>
                        </div>
                        <div class="grid-2">
                            <div class="metric-card">
                                <div class="metric-value positive">+₹45,680</div>
                                <div class="metric-label">Total Return</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">2.34</div>
                                <div class="metric-label">Sharpe Ratio</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value negative">-12.5%</div>
                                <div class="metric-label">Max Drawdown</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">68.4%</div>
                                <div class="metric-label">Win Rate</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Equity Curve -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Equity Curve</h3>
                    </div>
                    <div class="chart-container">
                        <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <div>Equity Curve Chart</div>
                    </div>
                </div>

                <!-- Trade Analysis -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Trade Analysis</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Entry</th>
                                <th>Exit</th>
                                <th>Quantity</th>
                                <th>P&L</th>
                                <th>Return %</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-15</td>
                                <td>RELIANCE</td>
                                <td>Long</td>
                                <td>₹2,450</td>
                                <td>₹2,520</td>
                                <td>100</td>
                                <td class="positive">+₹7,000</td>
                                <td class="positive">+2.86%</td>
                            </tr>
                            <!-- More trades... -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Live Trading Page -->
            <div id="live-trading" class="page">
                <div class="page-header">
                    <h1 class="page-title">Live Trading</h1>
                    <div>
                        <span class="status running pulse">MARKET OPEN</span>
                        <button class="btn btn-danger" onclick="emergencyStop()">
                            <i class="fas fa-stop"></i> Emergency Stop
                        </button>
                    </div>
                </div>

                <div class="grid-3">
                    <!-- Strategy Status -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Strategy Status</h3>
                        </div>
                        <div id="live-strategies">
                            <!-- Live strategies will be populated here -->
                        </div>
                    </div>

                    <!-- Order Book -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Active Orders</h3>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Side</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="active-orders">
                                <!-- Orders will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Positions -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Open Positions</h3>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Qty</th>
                                    <th>Avg Price</th>
                                    <th>Current</th>
                                    <th>P&L</th>
                                </tr>
                            </thead>
                            <tbody id="open-positions">
                                <!-- Positions will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Real-time Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Real-time Market Data</h3>
                        <div>
                            <select>
                                <option>NIFTY 50</option>
                                <option>BANK NIFTY</option>
                                <option>RELIANCE</option>
                                <option>TCS</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container">
                        <i class="fas fa-chart-candlestick" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <div>Real-time Candlestick Chart</div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Page -->
            <div id="portfolio" class="page">
                <div class="page-header">
                    <h1 class="page-title">Portfolio Management</h1>
                    <button class="btn btn-primary" onclick="rebalancePortfolio()">
                        <i class="fas fa-balance-scale"></i> Rebalance
                    </button>
                </div>

                <!-- Portfolio Overview -->
                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-value" style="color: var(--primary-color);">₹4,52,850</div>
                        <div class="metric-label">Total Portfolio Value</div>
                        <div class="metric-change positive">+4.2% today</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value positive">+₹18,340</div>
                        <div class="metric-label">Today's P&L</div>
                        <div class="metric-change positive">+4.2%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">₹1,25,000</div>
                        <div class="metric-label">Available Cash</div>
                        <div class="metric-change">27.6% of portfolio</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="color: var(--warning-color);">65%</div>
                        <div class="metric-label">Risk Utilization</div>
                        <div class="metric-change">Within limits</div>
                    </div>
                </div>

                <div class="grid-2">
                    <!-- Asset Allocation -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Asset Allocation</h3>
                        </div>
                        <div class="chart-container">
                            <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div>Asset Allocation Pie Chart</div>
                        </div>
                    </div>

                    <!-- Risk Metrics -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Risk Metrics</h3>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">1.85</div>
                            <div class="metric-label">Portfolio Beta</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">2.34</div>
                            <div class="metric-label">Sharpe Ratio</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value negative">-8.5%</div>
                            <div class="metric-label">Max Drawdown</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">₹12,450</div>
                            <div class="metric-label">Value at Risk (95%)</div>
                        </div>
                    </div>
                </div>

                <!-- Holdings -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Current Holdings</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Quantity</th>
                                <th>Avg Price</th>
                                <th>Current Price</th>
                                <th>Market Value</th>
                                <th>Day P&L</th>
                                <th>Total P&L</th>
                                <th>Weight</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>RELIANCE</strong></td>
                                <td>50</td>
                                <td>₹2,450</td>
                                <td>₹2,485</td>
                                <td>₹1,24,250</td>
                                <td class="positive">+₹1,750</td>
                                <td class="positive">+₹8,900</td>
                                <td>27.4%</td>
                            </tr>
                            <!-- More holdings... -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Risk Management Page -->
            <div id="risk-management" class="page">
                <div class="page-header">
                    <h1 class="page-title">Risk Management</h1>
                    <button class="btn btn-primary" onclick="updateRiskLimits()">
                        <i class="fas fa-shield-alt"></i> Update Limits
                    </button>
                </div>

                <!-- Risk Overview -->
                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-value" style="color: var(--warning-color);">68%</div>
                        <div class="metric-label">Risk Utilization</div>
                        <div class="metric-change">₹68,000 / ₹100,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value negative">-₹12,450</div>
                        <div class="metric-label">Daily VaR (95%)</div>
                        <div class="metric-change">2.75% of portfolio</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value negative">-8.5%</div>
                        <div class="metric-label">Max Drawdown</div>
                        <div class="metric-change">Last 30 days</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0.85</div>
                        <div class="metric-label">Correlation Risk</div>
                        <div class="metric-change">Portfolio correlation</div>
                    </div>
                </div>

                <div class="grid-2">
                    <!-- Risk Limits -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Risk Limits Configuration</h3>
                        </div>
                        <div class="form-group">
                            <label>Max Portfolio Risk (%)</label>
                            <input type="number" value="5" min="1" max="20">
                        </div>
                        <div class="form-group">
                            <label>Max Single Position Risk (%)</label>
                            <input type="number" value="2" min="0.5" max="10">
                        </div>
                        <div class="form-group">
                            <label>Daily Loss Limit (₹)</label>
                            <input type="number" value="25000">
                        </div>
                        <div class="form-group">
                            <label>Max Drawdown Limit (%)</label>
                            <input type="number" value="15" min="5" max="30">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked> Auto-stop on limit breach
                            </label>
                        </div>
                    </div>

                    <!-- Risk Monitoring -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Risk Alerts</h3>
                        </div>
                        <div class="notification warning">
                            <strong>High Correlation Warning</strong><br>
                            Portfolio correlation has increased to 0.85
                        </div>
                        <div class="notification success">
                            <strong>Risk Check Passed</strong><br>
                            All positions within risk limits
                        </div>
                    </div>
                </div>

                <!-- Risk Breakdown -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Risk Breakdown by Strategy</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Strategy</th>
                                <th>Allocated Capital</th>
                                <th>Risk Exposure</th>
                                <th>Daily VaR</th>
                                <th>Max Drawdown</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Momentum Pro</td>
                                <td>₹1,50,000</td>
                                <td>65%</td>
                                <td>-₹4,500</td>
                                <td>-6.8%</td>
                                <td><span class="status running">Active</span></td>
                            </tr>
                            <!-- More strategies... -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Market Data Page -->
            <div id="market-data" class="page">
                <div class="page-header">
                    <h1 class="page-title">Market Data & Analysis</h1>
                    <button class="btn btn-primary" onclick="addToWatchlist()">
                        <i class="fas fa-plus"></i> Add Symbol
                    </button>
                </div>

                <!-- Market Overview -->
                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-value positive">19,845</div>
                        <div class="metric-label">NIFTY 50</div>
                        <div class="metric-change positive">+125 (+0.63%)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value negative">45,280</div>
                        <div class="metric-label">BANK NIFTY</div>
                        <div class="metric-change negative">-89 (-0.20%)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value positive">2,485</div>
                        <div class="metric-label">RELIANCE</div>
                        <div class="metric-change positive">+35 (+1.43%)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value positive">3,695</div>
                        <div class="metric-label">TCS</div>
                        <div class="metric-change positive">+15 (+0.41%)</div>
                    </div>
                </div>

                <!-- Market Analysis -->
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Technical Analysis</h3>
                        </div>
                        <div class="chart-container">
                            <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div>Advanced Charting Tools</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Market Scanner</h3>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Signal</th>
                                    <th>Strength</th>
                                    <th>Price</th>
                                    <th>Volume</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>INFY</td>
                                    <td><span class="status running">BUY</span></td>
                                    <td>Strong</td>
                                    <td>₹1,450</td>
                                    <td>2.5M</td>
                                </tr>
                                <!-- More signals... -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Watchlist -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Watchlist</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>LTP</th>
                                <th>Change</th>
                                <th>Volume</th>
                                <th>RSI</th>
                                <th>MACD</th>
                                <th>Signal</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="watchlist-table">
                            <!-- Watchlist items will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Research Page -->
            <div id="research" class="page">
                <div class="page-header">
                    <h1 class="page-title">Research Laboratory</h1>
                    <button class="btn btn-primary" onclick="createNotebook()">
                        <i class="fas fa-plus"></i> New Notebook
                    </button>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="showResearchTab('notebooks')">Research Notebooks</button>
                    <button class="tab-btn" onclick="showResearchTab('data-analysis')">Data Analysis</button>
                    <button class="tab-btn" onclick="showResearchTab('ml-models')">ML Models</button>
                </div>

                <!-- Research Notebooks -->
                <div id="notebooks" class="tab-content active">
                    <div class="grid-3">
                        <div class="card">
                            <h4>Market Regime Analysis</h4>
                            <p>Analyzing different market regimes using HMM models</p>
                            <div style="margin: 15px 0;">
                                <span class="status running">Running</span>
                                <span style="margin-left: 10px; color: var(--text-light);">Last run: 2 hours ago</span>
                            </div>
                            <button class="btn btn-primary btn-sm">Open Notebook</button>
                        </div>
                        
                        <div class="card">
                            <h4>Factor Analysis</h4>
                            <p>Multi-factor model for stock returns prediction</p>
                            <div style="margin: 15px 0;">
                                <span class="status stopped">Stopped</span>
                                <span style="margin-left: 10px; color: var(--text-light);">Last run: 1 day ago</span>
                            </div>
                            <button class="btn btn-primary btn-sm">Open Notebook</button>
                        </div>
                        
                        <div class="card">
                            <h4>Sentiment Analysis</h4>
                            <p>News sentiment impact on stock prices</p>
                            <div style="margin: 15px 0;">
                                <span class="status running">Running</span>
                                <span style="margin-left: 10px; color: var(--text-light);">Last run: 30 min ago</span>
                            </div>
                            <button class="btn btn-primary btn-sm">Open Notebook</button>
                        </div>
                    </div>
                </div>

                <!-- Data Analysis -->
                <div id="data-analysis" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Data Analysis Tools</h3>
                        </div>
                        <div class="grid-2">
                            <div>
                                <h5>Correlation Analysis</h5>
                                <div class="chart-container" style="height: 250px;">
                                    <i class="fas fa-project-diagram" style="font-size: 2rem;"></i>
                                    <div>Correlation Heatmap</div>
                                </div>
                            </div>
                            <div>
                                <h5>Returns Distribution</h5>
                                <div class="chart-container" style="height: 250px;">
                                    <i class="fas fa-chart-bar" style="font-size: 2rem;"></i>
                                    <div>Returns Histogram</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ML Models -->
                <div id="ml-models" class="tab-content">
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Active Models</h3>
                            </div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Model</th>
                                        <th>Type</th>
                                        <th>Accuracy</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>LSTM Price Predictor</td>
                                        <td>Deep Learning</td>
                                        <td>87.3%</td>
                                        <td><span class="status running">Training</span></td>
                                    </tr>
                                    <tr>
                                        <td>Random Forest Classifier</td>
                                        <td>Ensemble</td>
                                        <td>79.1%</td>
                                        <td><span class="status running">Deployed</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Model Performance</h3>
                            </div>
                            <div class="chart-container">
                                <i class="fas fa-brain" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <div>Model Performance Metrics</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Optimization Page -->
            <div id="optimization" class="page">
                <div class="page-header">
                    <h1 class="page-title">Strategy Optimization</h1>
                    <button class="btn btn-primary" onclick="startOptimization()">
                        <i class="fas fa-cogs"></i> Start Optimization
                    </button>
                </div>

                <div class="grid-2">
                    <!-- Optimization Configuration -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Optimization Settings</h3>
                        </div>
                        <div class="form-group">
                            <label>Strategy to Optimize</label>
                            <select>
                                <option>Momentum Strategy v2.1</option>
                                <option>Mean Reversion Pro</option>
                                <option>Arbitrage Master</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Optimization Method</label>
                            <select>
                                <option>Genetic Algorithm</option>
                                <option>Particle Swarm</option>
                                <option>Grid Search</option>
                                <option>Bayesian Optimization</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Objective Function</label>
                            <select>
                                <option>Maximize Sharpe Ratio</option>
                                <option>Maximize Total Return</option>
                                <option>Minimize Drawdown</option>
                                <option>Maximize Profit Factor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Walk-Forward Analysis</label>
                            <input type="checkbox" checked> Enable walk-forward
                        </div>
                    </div>

                    <!-- Optimization Results -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Optimization Progress</h3>
                        </div>
                        <div style="text-align: center; margin: 50px 0;">
                            <i class="fas fa-cogs fa-spin" style="font-size: 3rem; color: var(--primary-color);"></i>
                            <div style="margin-top: 15px;">Optimization in progress...</div>
                            <div style="margin-top: 10px; color: var(--text-light);">Generation 24/100</div>
                        </div>
                    </div>
                </div>

                <!-- Parameter Space -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Parameter Optimization Space</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Current Value</th>
                                <th>Min</th>
                                <th>Max</th>
                                <th>Step</th>
                                <th>Optimize</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SMA Fast Period</td>
                                <td>10</td>
                                <td>5</td>
                                <td>20</td>
                                <td>1</td>
                                <td><input type="checkbox" checked></td>
                            </tr>
                            <tr>
                                <td>SMA Slow Period</td>
                                <td>30</td>
                                <td>20</td>
                                <td>50</td>
                                <td>5</td>
                                <td><input type="checkbox" checked></td>
                            </tr>
                            <tr>
                                <td>RSI Period</td>
                                <td>14</td>
                                <td>10</td>
                                <td>25</td>
                                <td>1</td>
                                <td><input type="checkbox"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Alerts Page -->
            <div id="alerts" class="page">
                <div class="page-header">
                    <h1 class="page-title">Alerts & Signals</h1>
                    <button class="btn btn-primary" onclick="createAlert()">
                        <i class="fas fa-plus"></i> Create Alert
                    </button>
                </div>

                <div class="grid-2">
                    <!-- Active Alerts -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Active Alerts</h3>
                        </div>
                        <div class="notification success">
                            <strong>Price Alert Triggered</strong><br>
                            RELIANCE crossed ₹2,500 - Target reached
                        </div>
                        <div class="notification warning">
                            <strong>Risk Alert</strong><br>
                            Portfolio risk exposure above 70%
                        </div>
                        <div class="notification error">
                            <strong>Strategy Alert</strong><br>
                            Momentum strategy stopped due to consecutive losses
                        </div>
                    </div>

                    <!-- Signal Generator -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Signal Generator</h3>
                        </div>
                        <div class="form-group">
                            <label>Signal Type</label>
                            <select>
                                <option>Price Alert</option>
                                <option>Technical Indicator</option>
                                <option>Volume Alert</option>
                                <option>News Sentiment</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Symbol</label>
                            <input type="text" placeholder="e.g., RELIANCE">
                        </div>
                        <div class="form-group">
                            <label>Condition</label>
                            <select>
                                <option>Price Above</option>
                                <option>Price Below</option>
                                <option>RSI Overbought</option>
                                <option>RSI Oversold</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Threshold</label>
                            <input type="number" placeholder="2500">
                        </div>
                    </div>
                </div>

                <!-- Recent Signals -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Signals</h3>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Symbol</th>
                                <th>Signal</th>
                                <th>Type</th>
                                <th>Confidence</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>14:32:15</td>
                                <td>TCS</td>
                                <td>Buy Signal</td>
                                <td>Technical</td>
                                <td>89%</td>
                                <td><button class="btn btn-sm btn-primary">Execute</button></td>
                            </tr>
                            <!-- More signals... -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics" class="page">
                <div class="page-header">
                    <h1 class="page-title">Advanced Analytics</h1>
                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-file-export"></i> Generate Report
                    </button>
                </div>

                <!-- Performance Analytics -->
                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-value">2.34</div>
                        <div class="metric-label">Sharpe Ratio</div>
                        <div class="metric-change positive">Excellent</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">1.85</div>
                        <div class="metric-label">Sortino Ratio</div>
                        <div class="metric-change positive">Very Good</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0.45</div>
                        <div class="metric-label">Information Ratio</div>
                        <div class="metric-change">vs Benchmark</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">12.5</div>
                        <div class="metric-label">Calmar Ratio</div>
                        <div class="metric-change positive">Strong</div>
                    </div>
                </div>

                <div class="grid-2">
                    <!-- Performance Attribution -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Performance Attribution</h3>
                        </div>
                        <div class="chart-container">
                            <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div>Performance Attribution Chart</div>
                        </div>
                    </div>

                    <!-- Risk Analytics -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Risk Analytics</h3>
                        </div>
                        <div class="chart-container">
                            <i class="fas fa-chart-area" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <div>Risk Decomposition Chart</div>
                        </div>
                    </div>
                </div>

                <!-- Trade Analytics -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Trade Analytics</h3>
                    </div>
                    <div class="grid-4">
                        <div class="metric-card">
                            <div class="metric-value">₹3,450</div>
                            <div class="metric-label">Avg Win</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value negative">-₹1,250</div>
                            <div class="metric-label">Avg Loss</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">2.76</div>
                            <div class="metric-label">Profit Factor</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">68.4%</div>
                            <div class="metric-label">Win Rate</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings" class="page">
                <div class="page-header">
                    <h1 class="page-title">System Settings</h1>
                    <button class="btn btn-primary" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="showSettingsTab('general')">General</button>
                    <button class="tab-btn" onclick="showSettingsTab('trading')">Trading</button>
                    <button class="tab-btn" onclick="showSettingsTab('risk')">Risk</button>
                    <button class="tab-btn" onclick="showSettingsTab('notifications')">Notifications</button>
                </div>

                <!-- General Settings -->
                <div id="general-settings" class="tab-content active">
                    <div class="grid-2">
                        <div class="card">
                            <h4>System Preferences</h4>
                            <div class="form-group">
                                <label>Default Timezone</label>
                                <select>
                                    <option>Asia/Kolkata (IST)</option>
                                    <option>America/New_York (EST)</option>
                                    <option>Europe/London (GMT)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Date Format</label>
                                <select>
                                    <option>DD/MM/YYYY</option>
                                    <option>MM/DD/YYYY</option>
                                    <option>YYYY-MM-DD</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Currency</label>
                                <select>
                                    <option>INR (₹)</option>
                                    <option>USD ($)</option>
                                    <option>EUR (€)</option>
                                </select>
                            </div>
                        </div>

                        <div class="card">
                            <h4>Performance Settings</h4>
                            <div class="form-group">
                                <label>Data Refresh Rate</label>
                                <select>
                                    <option>Real-time</option>
                                    <option>1 second</option>
                                    <option>5 seconds</option>
                                    <option>10 seconds</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Enable advanced charting
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Auto-save strategies
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trading Settings -->
                <div id="trading-settings" class="tab-content">
                    <div class="grid-2">
                        <div class="card">
                            <h4>Execution Settings</h4>
                            <div class="form-group">
                                <label>Default Order Type</label>
                                <select>
                                    <option>Market</option>
                                    <option>Limit</option>
                                    <option>Stop</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Order Timeout (seconds)</label>
                                <input type="number" value="30">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Confirm orders before execution
                                </label>
                            </div>
                        </div>

                        <div class="card">
                            <h4>Slippage & Commission</h4>
                            <div class="form-group">
                                <label>Default Slippage (%)</label>
                                <input type="number" value="0.05" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Commission per Trade (₹)</label>
                                <input type="number" value="20">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Risk Settings -->
                <div id="risk-settings" class="tab-content">
                    <div class="card">
                        <h4>Risk Management Settings</h4>
                        <div class="grid-2">
                            <div class="form-group">
                                <label>Max Portfolio Risk (%)</label>
                                <input type="number" value="5" min="1" max="20">
                            </div>
                            <div class="form-group">
                                <label>Max Position Size (%)</label>
                                <input type="number" value="2" min="0.5" max="10">
                            </div>
                            <div class="form-group">
                                <label>Daily Loss Limit (₹)</label>
                                <input type="number" value="25000">
                            </div>
                            <div class="form-group">
                                <label>Max Drawdown (%)</label>
                                <input type="number" value="15" min="5" max="30">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked> Auto-stop on risk limit breach
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox"> Enable portfolio heating cooling
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Notifications Settings -->
                <div id="notifications-settings" class="tab-content">
                    <div class="grid-2">
                        <div class="card">
                            <h4>Alert Preferences</h4>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Email notifications
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox"> SMS notifications
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Browser notifications
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Trading alerts
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked> Risk alerts
                                </label>
                            </div>
                        </div>

                        <div class="card">
                            <h4>Notification Settings</h4>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" value="trader@example.com">
                            </div>
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" value="+91 9876543210">
                            </div>
                            <div class="form-group">
                                <label>Alert Frequency</label>
                                <select>
                                    <option>Immediate</option>
                                    <option>Every 5 minutes</option>
                                    <option>Every 15 minutes</option>
                                    <option>Hourly</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification Container -->
    <div class="notifications" id="notifications"></div>

    <!-- Quick Strategy Modal -->
    <div id="quick-strategy-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('quick-strategy-modal')">&times;</span>
            <h2>Quick Strategy Creator</h2>
            <form onsubmit="createQuickStrategy(event)">
                <div class="form-group">
                    <label>Strategy Name</label>
                    <input type="text" required placeholder="My Quick Strategy">
                </div>
                <div class="form-group">
                    <label>Template</label>
                    <select>
                        <option>Simple Moving Average Crossover</option>
                        <option>RSI Overbought/Oversold</option>
                        <option>Bollinger Band Breakout</option>
                        <option>MACD Signal</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Symbol</label>
                    <input type="text" required placeholder="RELIANCE">
                </div>
                <div class="form-group">
                    <label>Timeframe</label>
                    <select>
                        <option>1 minute</option>
                        <option>5 minutes</option>
                        <option>15 minutes</option>
                        <option>1 hour</option>
                        <option>1 day</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Capital Allocation (₹)</label>
                    <input type="number" value="50000" required>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <button type="submit" class="btn btn-primary">Create Strategy</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('quick-strategy-modal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global application state
        let currentPage = 'dashboard';
        let strategies = [
            {
                id: 1,
                name: 'Momentum Pro v2.1',
                status: 'running',
                pnl: 8450,
                trades: 24,
                winRate: 87.5,
                capital: 150000
            },
            {
                id: 2,
                name: 'Mean Reversion Master',
                status: 'paused',
                pnl: -1250,
                trades: 8,
                winRate: 62.5,
                capital: 75000
            },
            {
                id: 3,
                name: 'Arbitrage Hunter',
                status: 'running',
                pnl: 12300,
                trades: 156,
                winRate: 94.2,
                capital: 200000
            }
        ];

        let trades = [
            {
                time: '14:32:15',
                strategy: 'Momentum Pro',
                symbol: 'RELIANCE',
                side: 'BUY',
                quantity: 50,
                price: 2485,
                pnl: 1750,
                status: 'filled'
            },
            {
                time: '14:28:42',
                strategy: 'Arbitrage Hunter',
                symbol: 'TCS',
                side: 'SELL',
                quantity: 25,
                price: 3695,
                pnl: 890,
                status: 'filled'
            }
        ];

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            renderStrategies();
            renderTrades();
            startRealTimeUpdates();
        });

        function initializeApp() {
            // Load saved theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-toggle i').className = 'fas fa-sun';
            }

            // Show welcome notification
            showNotification('AlgoTrade Pro loaded successfully!', 'success');
        }

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            event.target.closest('.nav-link').classList.add('active');
            
            currentPage = pageId;
            
            // Page-specific initialization
            if (pageId === 'live-trading') {
                initializeLiveTrading();
            } else if (pageId === 'market-data') {
                initializeMarketData();
            }
        }

        // Strategy management
        function renderStrategies() {
            const container = document.getElementById('strategies-list');
            if (!container) return;

            container.innerHTML = strategies.map(strategy => `
                <div style="display: flex; justify-content: between; align-items: center; padding: 15px; border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 10px;">
                    <div style="flex: 1;">
                        <h5 style="margin: 0; color: var(--text-dark);">${strategy.name}</h5>
                        <div style="display: flex; gap: 15px; margin-top: 5px; font-size: 0.9rem; color: var(--text-light);">
                            <span>P&L: <strong class="${strategy.pnl >= 0 ? 'positive' : 'negative'}">₹${strategy.pnl.toLocaleString()}</strong></span>
                            <span>Trades: ${strategy.trades}</span>
                            <span>Win Rate: ${strategy.winRate}%</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <span class="status ${strategy.status}">${strategy.status.toUpperCase()}</span>
                        <button class="btn btn-sm btn-secondary" onclick="toggleStrategy(${strategy.id})">
                            <i class="fas fa-${strategy.status === 'running' ? 'pause' : 'play'}"></i>
                        </button>
                        <button class="btn btn-sm btn-primary" onclick="editStrategy(${strategy.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderTrades() {
            const container = document.getElementById('recent-trades');
            if (!container) return;

            container.innerHTML = trades.map(trade => `
                <tr>
                    <td>${trade.time}</td>
                    <td>${trade.strategy}</td>
                    <td><strong>${trade.symbol}</strong></td>
                    <td><span class="status ${trade.side.toLowerCase() === 'buy' ? 'running' : 'stopped'}">${trade.side}</span></td>
                    <td>${trade.quantity}</td>
                    <td>₹${trade.price}</td>
                    <td class="${trade.pnl >= 0 ? 'positive' : 'negative'}">₹${trade.pnl}</td>
                    <td><span class="status running">${trade.status}</span></td>
                </tr>
            `).join('');
        }

        // Live trading functions
        function initializeLiveTrading() {
            renderLiveStrategies();
            renderActiveOrders();
            renderOpenPositions();
        }

        function renderLiveStrategies() {
            const container = document.getElementById('live-strategies');
            if (!container) return;

            container.innerHTML = strategies.filter(s => s.status === 'running').map(strategy => `
                <div style="padding: 10px; border-left: 3px solid var(--success-color); background: rgba(16, 185, 129, 0.05); margin-bottom: 10px; border-radius: 5px;">
                    <div style="font-weight: 600;">${strategy.name}</div>
                    <div style="font-size: 0.9rem; color: var(--text-light);">P&L: ₹${strategy.pnl} | Trades: ${strategy.trades}</div>
                </div>
            `).join('');
        }

        function renderActiveOrders() {
            const container = document.getElementById('active-orders');
            if (!container) return;

            const orders = [
                { symbol: 'RELIANCE', side: 'BUY', qty: 50, price: 2480, status: 'pending' },
                { symbol: 'TCS', side: 'SELL', qty: 25, price: 3700, status: 'partial' }
            ];

            container.innerHTML = orders.map(order => `
                <tr>
                    <td><strong>${order.symbol}</strong></td>
                    <td><span class="status ${order.side.toLowerCase() === 'buy' ? 'running' : 'stopped'}">${order.side}</span></td>
                    <td>${order.qty}</td>
                    <td>₹${order.price}</td>
                    <td><span class="status ${order.status === 'pending' ? 'paused' : 'running'}">${order.status}</span></td>
                </tr>
            `).join('');
        }

        function renderOpenPositions() {
            const container = document.getElementById('open-positions');
            if (!container) return;

            const positions = [
                { symbol: 'RELIANCE', qty: 100, avgPrice: 2450, current: 2485, pnl: 3500 },
                { symbol: 'TCS', qty: 50, avgPrice: 3680, current: 3695, pnl: 750 },
                { symbol: 'INFY', qty: 75, avgPrice: 1420, current: 1435, pnl: 1125 }
            ];

            container.innerHTML = positions.map(pos => `
                <tr>
                    <td><strong>${pos.symbol}</strong></td>
                    <td>${pos.qty}</td>
                    <td>₹${pos.avgPrice}</td>
                    <td>₹${pos.current}</td>
                    <td class="${pos.pnl >= 0 ? 'positive' : 'negative'}">₹${pos.pnl}</td>
                </tr>
            `).join('');
        }

        // Market data functions
        function initializeMarketData() {
            renderWatchlist();
            startMarketDataUpdates();
        }

        function renderWatchlist() {
            const container = document.getElementById('watchlist-table');
            if (!container) return;

            const watchlist = [
                { symbol: 'RELIANCE', ltp: 2485, change: 35, volume: 2500000, rsi: 68, macd: 'Bullish', signal: 'BUY' },
                { symbol: 'TCS', ltp: 3695, change: 15, volume: 1800000, rsi: 45, macd: 'Neutral', signal: 'HOLD' },
                { symbol: 'INFY', ltp: 1435, change: -12, volume: 3200000, rsi: 72, macd: 'Bearish', signal: 'SELL' },
                { symbol: 'HDFC BANK', ltp: 1680, change: -8, volume: 2100000, rsi: 38, macd: 'Bullish', signal: 'BUY' }
            ];

            container.innerHTML = watchlist.map(item => `
                <tr>
                    <td><strong>${item.symbol}</strong></td>
                    <td>₹${item.ltp}</td>
                    <td class="${item.change >= 0 ? 'positive' : 'negative'}">${item.change >= 0 ? '+' : ''}₹${item.change}</td>
                    <td>${(item.volume / 1000000).toFixed(1)}M</td>
                    <td>${item.rsi}</td>
                    <td>${item.macd}</td>
                    <td><span class="status ${item.signal === 'BUY' ? 'running' : item.signal === 'SELL' ? 'stopped' : 'paused'}">${item.signal}</span></td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="quickTrade('${item.symbol}')">Trade</button>
                        <button class="btn btn-sm btn-secondary" onclick="addAlert('${item.symbol}')">Alert</button>
                    </td>
                </tr>
            `).join('');
        }

        // Strategy functions
        function toggleStrategy(strategyId) {
            const strategy = strategies.find(s => s.id === strategyId);
            if (!strategy) return;

            strategy.status = strategy.status === 'running' ? 'paused' : 'running';
            renderStrategies();
            showNotification(`Strategy ${strategy.name} ${strategy.status}`, 'success');
        }

        function editStrategy(strategyId) {
            showNotification(`Opening strategy editor for ID: ${strategyId}`, 'success');
            showPage('strategy-builder');
        }

        function startAllStrategies() {
            strategies.forEach(strategy => {
                strategy.status = 'running';
            });
            renderStrategies();
            showNotification('All strategies started successfully!', 'success');
        }

        function refreshStrategies() {
            // Simulate data refresh
            strategies.forEach(strategy => {
                strategy.pnl += Math.floor(Math.random() * 1000) - 500;
                strategy.trades += Math.floor(Math.random() * 3);
            });
            renderStrategies();
            showNotification('Strategies data refreshed', 'success');
        }

        // Quick strategy creation
        function createQuickStrategy(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const newStrategy = {
                id: strategies.length + 1,
                name: formData.get('strategyName') || 'Quick Strategy',
                status: 'paused',
                pnl: 0,
                trades: 0,
                winRate: 0,
                capital: parseInt(formData.get('capital')) || 50000
            };

            strategies.push(newStrategy);
            renderStrategies();
            closeModal('quick-strategy-modal');
            showNotification(`Strategy "${newStrategy.name}" created successfully!`, 'success');
        }

        // Tab management
        function showBuilderTab(tabName) {
            document.querySelectorAll('#strategy-builder .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#strategy-builder .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName === 'visual' ? 'visual-builder' : tabName === 'code' ? 'code-editor' : 'templates').classList.add('active');
            event.target.classList.add('active');
        }

        function showResearchTab(tabName) {
            document.querySelectorAll('#research .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#research .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showSettingsTab(tabName) {
            document.querySelectorAll('#settings .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#settings .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName + '-settings').classList.add('active');
            event.target.classList.add('active');
        }

        // Strategy builder functions
        function loadTemplate() {
            showNotification('Loading strategy template...', 'success');
        }

        function saveStrategy() {
            showNotification('Strategy saved successfully!', 'success');
        }

        function loadStrategyTemplate(templateType) {
            showNotification(`Loading ${templateType} template...`, 'success');
            // Switch to visual builder
            document.getElementById('visual-builder').classList.add('active');
            document.getElementById('code-editor').classList.remove('active');
            document.getElementById('templates').classList.remove('active');
        }

        // Backtesting functions
        function runBacktest() {
            showNotification('Starting backtest...', 'warning');
            
            // Simulate backtest progress
            setTimeout(() => {
                showNotification('Backtest completed successfully!', 'success');
                updateBacktestResults();
            }, 3000);
        }

        function updateBacktestResults() {
            // Update backtest metrics with simulated results
            showNotification('Backtest results updated', 'success');
        }

        // Live trading functions
        function emergencyStop() {
            if (confirm('Are you sure you want to emergency stop all trading? This will close all positions and cancel all orders.')) {
                strategies.forEach(strategy => {
                    strategy.status = 'stopped';
                });
                renderStrategies();
                renderLiveStrategies();
                showNotification('EMERGENCY STOP ACTIVATED - All trading halted!', 'error');
            }
        }

        // Portfolio functions
        function rebalancePortfolio() {
            showNotification('Portfolio rebalancing initiated...', 'warning');
            setTimeout(() => {
                showNotification('Portfolio rebalanced successfully!', 'success');
            }, 2000);
        }

        // Risk management functions
        function updateRiskLimits() {
            showNotification('Risk limits updated successfully!', 'success');
        }

        // Market data functions
        function addToWatchlist() {
            const symbol = prompt('Enter symbol to add to watchlist:');
            if (symbol) {
                showNotification(`${symbol.toUpperCase()} added to watchlist`, 'success');
                renderWatchlist();
            }
        }

        function quickTrade(symbol) {
            showNotification(`Opening quick trade for ${symbol}`, 'success');
            // Here you would open a quick trade modal
        }

        function addAlert(symbol) {
            showNotification(`Alert created for ${symbol}`, 'success');
        }

        // Research functions
        function createNotebook() {
            showNotification('Creating new research notebook...', 'success');
        }

        // Optimization functions
        function startOptimization() {
            showNotification('Starting strategy optimization...', 'warning');
            
            // Simulate optimization progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                if (progress >= 100) {
                    clearInterval(interval);
                    showNotification('Optimization completed successfully!', 'success');
                } else {
                    showNotification(`Optimization progress: ${progress}%`, 'warning');
                }
            }, 1000);
        }

        // Alerts functions
        function createAlert() {
            showNotification('Alert creation form would open here', 'success');
        }

        // Analytics functions
        function generateReport() {
            showNotification('Generating comprehensive analytics report...', 'warning');
            setTimeout(() => {
                showNotification('Analytics report generated successfully!', 'success');
            }, 2000);
        }

        // Settings functions
        function saveSettings() {
            showNotification('Settings saved successfully!', 'success');
        }

        // Chart functions
        function updateChart(timeframe) {
            // Update chart timeframe buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            showNotification(`Chart updated to ${timeframe} view`, 'success');
        }

        // Real-time updates
        function startRealTimeUpdates() {
            setInterval(() => {
                updateRealTimeData();
            }, 5000); // Update every 5 seconds
        }

        function updateRealTimeData() {
            // Update portfolio metrics
            updatePortfolioMetrics();
            
            // Update market data if on market data page
            if (currentPage === 'market-data') {
                startMarketDataUpdates();
            }
            
            // Update live trading data if on live trading page
            if (currentPage === 'live-trading') {
                updateLiveTradingData();
            }
        }

        function updatePortfolioMetrics() {
            const pnlElement = document.getElementById('total-pnl');
            const activeStrategiesElement = document.getElementById('active-strategies');
            const riskExposureElement = document.getElementById('risk-exposure');
            const winRateElement = document.getElementById('win-rate');

            if (pnlElement) {
                const currentPnl = parseInt(pnlElement.textContent.replace(/[^\d-]/g, ''));
                const change = Math.floor(Math.random() * 1000) - 500;
                const newPnl = currentPnl + change;
                pnlElement.textContent = `${newPnl >= 0 ? '+' : ''}₹${Math.abs(newPnl).toLocaleString()}`;
                pnlElement.className = newPnl >= 0 ? 'metric-value positive' : 'metric-value negative';
            }

            if (activeStrategiesElement) {
                const activeCount = strategies.filter(s => s.status === 'running').length;
                activeStrategiesElement.textContent = activeCount;
            }

            if (riskExposureElement) {
                const risk = Math.floor(Math.random() * 20) + 50;
                riskExposureElement.textContent = `${risk}%`;
            }

            if (winRateElement) {
                const winRate = (Math.random() * 20 + 70).toFixed(1);
                winRateElement.textContent = `${winRate}%`;
            }
        }

        function startMarketDataUpdates() {
            // Simulate real-time market data updates
            const symbols = ['RELIANCE', 'TCS', 'INFY', 'HDFC BANK'];
            symbols.forEach(symbol => {
                // Simulate price changes
                const change = (Math.random() - 0.5) * 50;
                // Update display would go here
            });
        }

        function updateLiveTradingData() {
            // Update live trading metrics
            renderLiveStrategies();
            renderActiveOrders();
            renderOpenPositions();
        }

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Theme functions
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (document.body.classList.contains('dark-mode')) {
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                showNotification('Dark mode activated', 'success');
            } else {
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                showNotification('Light mode activated', 'success');
            }
        }

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            const container = document.getElementById('notifications');
            container.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // Advanced features
        function enableAdvancedMode() {
            showNotification('Advanced trading mode enabled!', 'success');
        }

        function exportData() {
            showNotification('Exporting trading data...', 'warning');
            setTimeout(() => {
                showNotification('Data exported successfully!', 'success');
            }, 2000);
        }

        function importStrategy() {
            showNotification('Strategy import initiated...', 'warning');
        }

        function connectAPI() {
            showNotification('Connecting to trading API...', 'warning');
            setTimeout(() => {
                showNotification('API connected successfully!', 'success');
            }, 3000);
        }

        // System monitoring
        function checkSystemHealth() {
            const status = document.getElementById('system-status');
            const isHealthy = Math.random() > 0.1; // 90% chance of being healthy
            
            if (isHealthy) {
                status.textContent = 'SYSTEM ONLINE';
                status.className = 'status running pulse';
            } else {
                status.textContent = 'SYSTEM WARNING';
                status.className = 'status paused';
                showNotification('System performance warning detected', 'warning');
            }
        }

        // Performance monitoring
        function monitorPerformance() {
            // Monitor memory usage, API latency, etc.
            const metrics = {
                memoryUsage: Math.floor(Math.random() * 40) + 40, // 40-80%
                apiLatency: Math.floor(Math.random() * 50) + 10,  // 10-60ms
                cpuUsage: Math.floor(Math.random() * 30) + 20     // 20-50%
            };
            
            if (metrics.memoryUsage > 80 || metrics.apiLatency > 100 || metrics.cpuUsage > 80) {
                showNotification('Performance warning: High resource usage detected', 'warning');
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 's':
                        event.preventDefault();
                        saveSettings();
                        break;
                    case 'n':
                        event.preventDefault();
                        if (currentPage === 'strategy-builder') {
                            showModal('quick-strategy-modal');
                        }
                        break;
                    case 'r':
                        event.preventDefault();
                        refreshStrategies();
                        break;
                }
            }
            
            // ESC to close modals
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.style.display = 'none';
                });
            }
        });

        // Start system monitoring
        setInterval(checkSystemHealth, 30000); // Check every 30 seconds
        setInterval(monitorPerformance, 60000); // Check every minute

        // Initialize drag and drop for strategy builder
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
        });

        function initializeDragAndDrop() {
            const canvas = document.querySelector('.canvas-area');
            const components = document.querySelectorAll('.component-item');
            
            components.forEach(component => {
                component.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.textContent);
                });
            });
            
            if (canvas) {
                canvas.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });
                
                canvas.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const componentText = e.dataTransfer.getData('text/plain');
                    showNotification(`Added component: ${componentText}`, 'success');
                    
                    // Add visual component to canvas
                    const componentDiv = document.createElement('div');
                    componentDiv.style.cssText = `
                        position: absolute;
                        top: ${e.offsetY}px;
                        left: ${e.offsetX}px;
                        background: var(--primary-color);
                        color: white;
                        padding: 10px 15px;
                        border-radius: 6px;
                        cursor: move;
                        user-select: none;
                    `;
                    componentDiv.textContent = componentText;
                    canvas.appendChild(componentDiv);
                    
                    // Make the component draggable within canvas
                    makeDraggable(componentDiv);
                });
            }
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.querySelector('.search-box input');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    if (query.length > 2) {
                        performSearch(query);
                    }
                });
            }
        });

        function performSearch(query) {
            // Search through strategies, symbols, etc.
            const results = strategies.filter(s => 
                s.name.toLowerCase().includes(query)
            );
            
            if (results.length > 0) {
                showNotification(`Found ${results.length} matching strategies`, 'success');
            }
        }

        // Data export functionality
        function exportTradingData() {
            const data = {
                strategies: strategies,
                trades: trades,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `trading_data_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Trading data exported successfully!', 'success');
        }

        // WebSocket simulation for real-time data
        function simulateWebSocket() {
            // Simulate real-time market data feed
            setInterval(() => {
                const symbols = ['NIFTY', 'BANKNIFTY', 'RELIANCE', 'TCS', 'INFY'];
                const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                const randomPrice = Math.floor(Math.random() * 5000) + 1000;
                const randomChange = (Math.random() - 0.5) * 100;
                
                // Emit simulated data event
                const event = new CustomEvent('marketData', {
                    detail: {
                        symbol: randomSymbol,
                        price: randomPrice,
                        change: randomChange
                    }
                });
                document.dispatchEvent(event);
            }, 2000);
        }

        // Listen for market data events
        document.addEventListener('marketData', function(event) {
            const { symbol, price, change } = event.detail;
            // Update UI with new market data
            console.log(`Market Update: ${symbol} - ₹${price} (${change >= 0 ? '+' : ''}${change.toFixed(2)})`);
        });

        // Start WebSocket simulation
        setTimeout(simulateWebSocket, 5000);

        console.log('🚀 AlgoTrade Pro - Complete Algorithmic Trading Platform Loaded Successfully!');
        console.log('Features: Strategy Builder | Backtesting | Live Trading | Portfolio Management | Risk Management | Market Data | Research Lab | Optimization | Alerts | Analytics');
    </script>
</body>
</html>
